// correct node orientation
@PART[adaptorCarrier,fwdAdaptor]:NEEDS[OrbitalTug]:After[OrbitalTug]
{
	@node_stack_mid = 	0.0, -0.01, 0.0, 	0.0, 1.0, 0.0, 1 
}

@PART[OrbitalGrapplerJR] { %CrewCapacity = 1 }

// add attachment nodes to TugCore
// if B9PartSwitch installed, set up 4/2/0 node switch
// change node size from 2 to 1 to match rest of parts
@PART[OrbitalTugCore]:NEEDS[OrbitalTug]:After[OrbitalTug] {
   @node_stack_top = 0, 0.76, 0, 0, 1, 0, 1
   @node_stack_bottom = 0, -0.76, 0, 0, -1, 0, 1
	
	node_stack_connect01 = 0.63, 0, 0, 1,0,0,	1
	node_stack_connect02 = -0.63, 0, 0, -1,0,0,	1
	node_stack_connect03 = 0, 0, 0.63, 0,0,1,	1
	node_stack_connect04 = 0, 0, -0.63, 0,0,-1,	1
	
	MODULE:NEEDS[B9PartSwitch] 	{
		name = ModuleB9PartSwitch
		moduleID = sideNodes
		SUBTYPE {
			name = Quad Nodes
			node = top
			node = bottom
			node = connect01
			node = connect02
			node = connect03
			node = connect04
			stackSymmetry = 3
		}   
		SUBTYPE {
			name = Dual Nodes
			node = top
			node = bottom
			node = connect01
			node = connect02
			stackSymmetry = 1
		}       
		SUBTYPE {
			name = No Nodes
			node = top
			node = bottom
			stackSymmetry = 0
		}
	}	
}

// Add Attachment node to engineOnArm
// Correct attachRules to allow node attachment
// if B9PartSwitch installed, set up 3/1 node switch
@PART[engineOnArm]:NEEDS[OrbitalTug]:After[OrbitalTug]
{
	node_stack_connect01 = 0,0,0.3, 0,0,1,1
	
	node_stack_connect02 = 0,0.3 ,0.3, 0,0,-1,0
	node_stack_connect03 = 0,-0.45 ,0.24, 0,0,-1,0
	
	@attachRules = 1,1,1,0,0
	
	MODULE:NEEDS[B9PartSwitch]	{
	name = ModuleB9PartSwitch
	moduleID = hiddenNodes
		SUBTYPE {
			name = No Nodes
			node = connect01
		}
		SUBTYPE {
			name = Extra Nodes
			node = connect01
			node = connect02
			node = connect03
			stackSymmetry = 3
		}
	}
}

// Add Attachment node to helperDrone
// Correct attachRules to allow node attachment
// if B9PartSwitch installed, set up 2/1 node switch
@PART[helperDrone]:NEEDS[OrbitalTug]:After[OrbitalTug]
{
	node_stack_top = 0.0, 0.22, 0.0, 0,1,0,0
	node_stack_bottom = 0.0, -0.2, 0.0, 0,-1,0,0
	
	@attachRules = 1,1,1,0,0
	
	MODULE:NEEDS[B9PartSwitch]	{
	name = ModuleB9PartSwitch
	moduleID = hiddenNodes
		SUBTYPE {
			name = Bottom Nodes
			node = bottom
		}
		SUBTYPE {
			name = Both Node
			node = top
			node = bottom
		}
	}
}

// Add Attachment node to DronePod
// Correct attachRules to allow node attachment
// if B9PartSwitch installed, set up 7/5/3/1 node switch
@PART[DronePod]:NEEDS[OrbitalTug]:After[OrbitalTug]
{
	node_stack_connect01 = -0.58, 0.0, 0.0, -1,0,0,0
	node_stack_connect02 = 0.58, 0.0, 0.0, 1,0,0,0

	node_stack_connect03 = -0.54, 0.4, 0.0, -1,0,0,0
	node_stack_connect04 = 0.54, 0.4, 0.0, 1,0,0,0
	
	node_stack_connect05 = -0.38, 0.8, 0.0, 0,1,0,0
	node_stack_connect06 = 0.38, 0.8, 0.0, 0,1,0,0
	
	// inside cargo bays facing out
	node_stack_front01 =  0.3, 0.5, -0.1, 0,0,-1, 0
	node_stack_front02 =  0.0, 0.5, -0.1, 0,0,-1, 0
	node_stack_front03 = -0.3, 0.5, -0.1, 0,0,-1, 0
	
	node_stack_front04 =  0.3, 0.7, -0.1, 0,0,-1, 0
	node_stack_front05 =  0.0, 0.7, -0.1, 0,0,-1, 0
	node_stack_front06 = -0.3, 0.7, -0.1, 0,0,-1, 0
	
	node_stack_front07 =  0.3, 0.3, -0.1, 0,0,-1, 0
	node_stack_front08 =  0.0, 0.3, -0.1, 0,0,-1, 0
	node_stack_front09 = -0.3, 0.3, -0.1, 0,0,-1, 0
	
	node_stack_back01 =  0.3, 0.5, 0.1, 0,0,1, 0
	node_stack_back02 =  0.0, 0.5, 0.1, 0,0,1, 0
	node_stack_back03 = -0.3, 0.5, 0.1, 0,0,1, 0

	node_stack_back04 =  0.3, 0.7, 0.1, 0,0,1, 0
	node_stack_back05 =  0.0, 0.7, 0.1, 0,0,1, 0
	node_stack_back06 = -0.3, 0.7, 0.1, 0,0,1, 0

	node_stack_back07 =  0.3, 0.3, 0.1, 0,0,1, 0
	node_stack_back08 =  0.0, 0.3, 0.1, 0,0,1, 0
	node_stack_back09 = -0.3, 0.3, 0.1, 0,0,1, 0
	
	// inside cargo bay - facing forward
	node_stack_connect07 = 0.0, 0.15, -0.4, 0,1,0, 0
	node_stack_connect08 = 0.34, 0.15, -0.19, 0,1,0, 0
	node_stack_connect09 = -0.34, 0.15, -0.19, 0,1,0, 0
	
	node_stack_connect10 = 0.0, 0.15, 0.4, 0,1,0, 0
	node_stack_connect11 = 0.34, 0.15, 0.19, 0,1,0, 0
	node_stack_connect12 = -0.34, 0.15, 0.19, 0,1,0, 0
	
	// outside base facing out
	node_stack_connect13 = 0.0, -0.02, -0.63, 0,0,-1, 0
	node_stack_connect14 = 0.0, -0.02, 0.63, 0,0,-1, 0
	
	@attachRules = 1,1,1,0,0
	
	MODULE:NEEDS[B9PartSwitch]	{
		name = ModuleB9PartSwitch
		moduleID = noNodes
		SUBTYPE {
			name = No Nodes
			node = connect13
			node = connect14
		}
		SUBTYPE {
			name = Bottom 
			node = connect01
			node = connect02
			node = connect13
			node = connect14
			stackSymmetry = 2
		}
		SUBTYPE {
			name = Botom Mid 
			node = connect01
			node = connect02
			node = connect03
			node = connect04
			node = connect13
			node = connect14
			stackSymmetry = 2
		}
		SUBTYPE {
			name = Botom Mid Top 
			node = connect01
			node = connect02
			node = connect03
			node = connect04
			node = connect05
			node = connect06
			node = connect13
			node = connect14
			stackSymmetry = 2
		}
		SUBTYPE {
			name = Inside Back Bay 
			node = connect07
			node = connect08
			node = connect09
			node = connect10
			node = connect11
			node = connect12
			node = connect13
			node = connect13
			node = connect14
			stackSymmetry = 2
		}
		SUBTYPE {
			name = BMT and Inside Back Bay
			node = connect01
			node = connect02
			node = connect03
			node = connect04
			node = connect05
			node = connect06
			node = connect07
			node = connect08
			node = connect09
			node = connect10
			node = connect11
			node = connect12
			node = connect13
			node = connect14
			stackSymmetry = 2
		}
		SUBTYPE {
			name = Bill and Bob went nutz
			node = connect01
			node = connect02
			node = connect03
			node = connect04
			node = connect05
			node = connect06
			node = front01
			node = front02
			node = front03
			node = front04
			node = front05
			node = front06
			node = front07
			node = front08
			node = front09
			node = back01
			node = back02
			node = back03
			node = back04
			node = back05
			node = back06
			node = back07
			node = back08
			node = back09
			node = connect07
			node = connect08
			node = connect09
			node = connect10
			node = connect11
			node = connect12
			node = connect13
			node = connect14
			stackSymmetry = 2
		}
	}
}

// Add Attachment node to OrbitalTugPod
// Correct attachRules to allow node attachment
// if B9PartSwitch installed, set up 7/5/3/1 node switch
@PART[OrbitalTugPod]:NEEDS[OrbitalTug]:After[OrbitalTug]
{
	node_stack_connect01 = -0.58, 0.0, 0.0, -1,0,0,0
	node_stack_connect02 = 0.58, 0.0, 0.0, 1,0,0,0

	node_stack_connect03 = -0.5, 0.4, 0.0, -1,0,0,0
	node_stack_connect04 = 0.5, 0.4, 0.0, 1,0,0,0
	
	node_stack_connect05 = -0.31, 0.87, 0.0, 0,1,0,0
	node_stack_connect06 = 0.31, 0.87, 0.0, 0,1,0,0

	@attachRules = 1,1,1,0,0
	
	MODULE:NEEDS[B9PartSwitch]	{
	name = ModuleB9PartSwitch
	moduleID = noNodes
		SUBTYPE {
			name = No Nodes
		}
		SUBTYPE {
			name = Bottom Nodes
			node = connect01
			node = connect02
			stackSymmetry = 2
		}
		SUBTYPE {
			name = Botom Mid Node
			node = connect01
			node = connect02
			node = connect03
			node = connect04
			stackSymmetry = 2
		}
		SUBTYPE {
			name = All Node
			node = connect01
			node = connect02
			node = connect03
			node = connect04
			node = connect05
			node = connect06
			stackSymmetry = 2
		}
	}
}

// Add Attachment node to fwdAdaptor
// Correct attachRules to allow node attachment
// if B9PartSwitch installed, set up ?? node switch
@PART[fwdAdaptor]:NEEDS[OrbitalTug]:After[OrbitalTug]
{
	node_stack_connect01 = -0.09, -0.35, -0.09, -1,0,-1,0
	node_stack_connect02 = 0.09, -0.35, 0.09, 1,0,1,0
	
	node_stack_connect03 = 0.09, -0.35, -0.09, 1,0,-1,0
	node_stack_connect04 = -0.09, -0.35, 0.09, -1,0,1,0
	
	node_stack_connect05 = -0.37, 0.0, -0.63, -.8,0,-.9,0
	node_stack_connect06 = 0.37, 0.0, 0.63, -.8,0,-.9,0
	node_stack_connect07 = -0.37, 0.0, 0.63, -.8,0,.9,0
	node_stack_connect08 = 0.37, 0.0, -0.63, .8,0,-.9,0
		
	node_stack_connect09 = -0.37, 0.6, -0.63, -.8,0,-.9,0
	node_stack_connect10 =  0.37, 0.6, 0.63, -.8,0,-.9,0
	node_stack_connect11 = -0.37, 0.6, 0.63, -.8,0,.9,0
	node_stack_connect12 =  0.37, 0.6, -0.63, .8,0,-.9,0
		
	node_stack_connect13 = -0.37, 1.2, -0.63, -.8,0,-.9,0
	node_stack_connect14 =  0.37, 1.2, 0.63, -.8,0,-.9,0
	node_stack_connect15 = -0.37, 1.2, 0.63, -.8,0,.9,0
	node_stack_connect16 =  0.37, 1.2, -0.63, .8,0,-.9,0
	
	MODULE:NEEDS[B9PartSwitch]	{
	name = ModuleB9PartSwitch
	moduleID = Nodes
		SUBTYPE {
			name = All
			node = connect01
			node = connect02
			node = connect03
			node = connect04

			node = connect05
			node = connect06
			node = connect07
			node = connect08

			node = connect09
			node = connect10
			node = connect11
			node = connect12

			node = connect13
			node = connect14
			node = connect15
			node = connect16
			stackSymmetry = 2
		}
		SUBTYPE {
			name = Inside
			node = connect01
			node = connect02
			node = connect03
			node = connect04
			stackSymmetry = 2
		}
		SUBTYPE {
			name = Outside
			node = connect05
			node = connect06
			node = connect07
			node = connect08
			node = connect09
			node = connect10
			node = connect11
			node = connect12
			node = connect13
			node = connect14
			node = connect15
			node = connect16
			stackSymmetry = 2
		}
		SUBTYPE {
			name = Plain
			stackSymmetry = 2
		}
	}
}

// Add Attachment node to adaptorCarrier
// Correct attachRules to allow node attachment
// if B9PartSwitch installed, set up ?? node switch
@PART[adaptorCarrier]:NEEDS[OrbitalTug]:After[OrbitalTug]
{
	node_stack_connect01 = -0.14, -0.35, -0.15, -1,0,-1,0
	node_stack_connect02 = 0.14, -0.35, 0.15, 1,0,1,0
	
	node_stack_connect03 = 0.14, -0.35, -0.15, 1,0,-1,0
	node_stack_connect04 = -0.14, -0.35, 0.15, -1,0,1,0
	
	node_stack_connect05 = -0.37, 0.0, -0.63, -.8,0,-.9,0
	node_stack_connect06 = 0.37, 0.0, 0.63, -.8,0,-.9,0
	node_stack_connect07 = -0.37, 0.0, 0.63, -.8,0,.9,0
	node_stack_connect08 = 0.37, 0.0, -0.63, .8,0,-.9,0
		
	node_stack_connect09 = -0.37, 0.6, -0.63, -.8,0,-.9,0
	node_stack_connect10 =  0.37, 0.6, 0.63, -.8,0,-.9,0
	node_stack_connect11 = -0.37, 0.6, 0.63, -.8,0,.9,0
	node_stack_connect12 =  0.37, 0.6, -0.63, .8,0,-.9,0
		
	node_stack_connect13 = -0.37, 1.2, -0.63, -.8,0,-.9,0
	node_stack_connect14 =  0.37, 1.2, 0.63, -.8,0,-.9,0
	node_stack_connect15 = -0.37, 1.2, 0.63, -.8,0,.9,0
	node_stack_connect16 =  0.37, 1.2, -0.63, .8,0,-.9,0
	
	// add nodes to inside of poles
	node_stack_connectInside05 = -0.27, 0.0, -0.53, -.8,0,-.9,0
	node_stack_connectInside06 = 0.27, 0.0, 0.53, -.8,0,-.9,0
	node_stack_connectInside07 = -0.27, 0.0, 0.53, -.8,0,.9,0
	node_stack_connectInside08 = 0.27, 0.0, -0.53, .8,0,-.9,0

	node_stack_connectInside09 = -0.27, 0.6, -0.53, -.8,0,-.9,0
	node_stack_connectInside10 =  0.27, 0.6, 0.53, -.8,0,-.9,0
	node_stack_connectInside11 = -0.27, 0.6, 0.53, -.8,0,.9,0
	node_stack_connectInside12 =  0.27, 0.6, -0.53, .8,0,-.9,0

	node_stack_connectInside13 = -0.27, 1.2, -0.53, -.8,0,-.9,0
	node_stack_connectInside14 =  0.27, 1.2, 0.53, -.8,0,-.9,0
	node_stack_connectInside15 = -0.27, 1.2, 0.53, -.8,0,.9,0
	node_stack_connectInside16 =  0.27, 1.2, -0.53, .8,0,-.9,0
	
	MODULE:NEEDS[B9PartSwitch]	{
	name = ModuleB9PartSwitch
	moduleID = Nodes
		SUBTYPE {
			name = All
			node = connect01
			node = connect02
			node = connect03
			node = connect04
			node = connect05
			node = connect06
			node = connect07
			node = connect08
			node = connect09
			node = connect10
			node = connect11
			node = connect12
			node = connect13
			node = connect14
			node = connect15
			node = connect16
			node = connectInside05
			node = connectInside06
			node = connectInside07
			node = connectInside08
				  = 
			node = connectInside09
			node = connectInside10
			node = connectInside11
			node = connectInside12
				  = 
			node = connectInside13
			node = connectInside14
			node = connectInside15
			node = connectInside16
			stackSymmetry = 2
		}
		SUBTYPE {
			name = Inside
			node = connect01
			node = connect02
			node = connect03
			node = connect04
			stackSymmetry = 2
		}
		SUBTYPE {
			name = Outside
			node = connect05
			node = connect06
			node = connect07
			node = connect08
			node = connect09
			node = connect10
			node = connect11
			node = connect12
			node = connect13
			node = connect14
			node = connect15
			node = connect16
			stackSymmetry = 2
		}
		SUBTYPE {
			name = Plain
			stackSymmetry = 2
		}
	}
}

// zer0Kerbal
